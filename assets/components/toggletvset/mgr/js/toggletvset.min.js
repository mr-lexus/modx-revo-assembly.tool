/*!
 * ToggleTVSet - Toggle the visibility of template variables sets by the value of a template variable
 * Version: 1.2.3
 * Build date: 2016-02-10
 */

Ext.onReady(function(){ToggleTVSet.toggleTVSet=function(a,b){var c;Ext.each(a,function(a){c=Ext.get("tv"+a+"-tr"),c&&(b?c.setStyle("display","block"):c.setStyle("display","none"))}),ToggleTVSet.options.debug&&console.log("ToggleTVSet triggered tvs("+a+") set to "+(b?"show":"hide")+".")},ToggleTVSet.toggleTVSets=function(a,b){var c,d;if(b?(c=a.hideTVs,d=a.showTVs):(c=a.store.data.keys.join().split(","),d=a.getValue().split(",")),ToggleTVSet.toggleTVSet(c,0),ToggleTVSet.toggleTVSet(d,1),!b&&ToggleTVSet.options.toggleTVsClearHidden){var e=c.filter(function(a){return-1===d.indexOf(a)});ToggleTVSet.clearTVSet(e)}},ToggleTVSet.clearTVSet=function(a){Ext.each(a,function(a){var b=ToggleTVSet.options.resourceForm.findField("tv"+a);b&&b.setValue("")})},ToggleTVSet.options.debug&&Ext.util.Observable.capture(Ext.getCmp("modx-panel-resource"),function(a){console.log(a,arguments)}),ToggleTVSet.options.resourcePanel=Ext.getCmp("modx-panel-resource"),ToggleTVSet.options.resourceForm=ToggleTVSet.options.resourcePanel.getForm(),ToggleTVSet.options.initialized=!1,ToggleTVSet.options.resourcePanel.on("afterlayout",function(){ToggleTVSet.options.initialized||Ext.each(ToggleTVSet.options.toggleTVs,function(a){ToggleTVSet.toggleTVSets(ToggleTVSet.options,!0);var b=ToggleTVSet.options.resourceForm.findField("tv"+a);b&&b.on("select",function(){ToggleTVSet.toggleTVSets(this,!1)})}),ToggleTVSet.options.initialized=!0})});